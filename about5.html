<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎤 音声認識アプリ 製品マニュアル</title>
    <style>
        /* リセットCSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic UI', 'Meiryo UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }

        /* ヘッダー */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* ナビゲーション */
        .nav {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .nav-list {
            display: flex;
            list-style: none;
            overflow-x: auto;
            padding: 1rem 0;
            gap: 2rem;
        }

        .nav-list li {
            white-space: nowrap;
        }

        .nav-list a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .nav-list a:hover {
            background: #667eea;
            color: white;
        }

        /* コンテナ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* セクション */
        .section {
            background: white;
            border-radius: 12px;
            padding: 2rem 2.5rem; /* 左右パディングを増加 */
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
            padding-left: 0.5rem; /* 見出しに左パディング */
        }

        .section h3 {
            color: #333;
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
            padding-left: 1.5rem; /* 左パディングを増加 */
            border-left: 4px solid #28a745;
        }

        .section h4 {
            color: #555;
            font-size: 1.2rem;
            margin: 1.5rem 0 0.5rem 0;
            padding-left: 0.5rem; /* 見出しに左パディング */
        }

        .section p, .section ul, .section ol, .section div:not(.ui-mockup):not(.code-block):not(.alert):not(.table):not(.faq-item) {
            padding-left: 0.5rem; /* 一般的なテキスト要素に左パディング */
        }

        .section ul, .section ol {
            margin-left: 1.5rem; /* リストの左マージン増加 */
        }

        /* アラート */
        .alert {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid;
        }

        .alert-info {
            background: #e7f3ff;
            border-color: #007bff;
            color: #004085;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        /* テーブル */
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        /* コードブロック */
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
        }

        .code-inline {
            background: #edf2f7;
            color: #2d3748;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        /* ステップ */
        .steps {
            counter-reset: step-counter;
        }

        .step {
            counter-increment: step-counter;
            margin: 1rem 0;
            padding: 1.5rem 1.5rem 1rem 2rem; /* 左パディングを増加 */
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            position: relative;
        }

        .step::before {
            content: "Step " counter(step-counter);
            background: #667eea;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            position: absolute;
            top: -0.5rem;
            left: 1.5rem; /* 左位置を調整 */
        }

        .step h4 {
            margin-top: 0.5rem;
            color: #667eea;
            padding-left: 0.5rem; /* 見出しに左パディング追加 */
        }

        .step p, .step ol, .step ul, .step div {
            padding-left: 0.5rem; /* 全てのテキスト要素に左パディング追加 */
        }

        .step ol, .step ul {
            margin-left: 1rem; /* リストの左マージン追加 */
        }

        .step li {
            margin-bottom: 0.3rem;
            padding-left: 0.3rem; /* リスト項目に左パディング */
        }

        /* UI模拟 */
        .ui-mockup {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }

        .ui-mockup .ui-title {
            color: #4299e1;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.2rem;
        }

        .ui-mockup .ui-button {
            background: #4299e1;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            display: inline-block;
            margin: 0.2rem;
            font-size: 0.9rem;
            text-align: center;
            min-width: 120px;
        }

        .ui-mockup .ui-input {
            background: #4a5568;
            color: #e2e8f0;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            display: inline-block;
            margin: 0.2rem;
            min-width: 200px;
        }

        /* FAQ */
        .faq-item {
            margin-bottom: 1.5rem;
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
        }

        .faq-question {
            background: #f8f9fa;
            padding: 1rem;
            font-weight: 600;
            color: #667eea;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-answer {
            padding: 1rem;
            border-top: 1px solid #eee;
        }

        /* バッジ */
        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            font-size: 0.8rem;
            font-weight: bold;
            border-radius: 12px;
            margin: 0.2rem;
        }

        .badge-primary {
            background: #667eea;
            color: white;
        }

        .badge-success {
            background: #28a745;
            color: white;
        }

        .badge-warning {
            background: #ffc107;
            color: #333;
        }

        .badge-danger {
            background: #dc3545;
            color: white;
        }

        /* レスポンシブ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .nav-list {
                flex-direction: column;
                gap: 0.5rem;
            }

            .section {
                padding: 1.5rem;
            }

            .section h2 {
                font-size: 1.5rem;
            }

            .table {
                font-size: 0.9rem;
            }

            .table th,
            .table td {
                padding: 0.5rem;
            }
        }

        /* プリント用スタイル */
        @media print {
            .nav {
                display: none;
            }
            
            .section {
                break-inside: avoid;
                margin-bottom: 1rem;
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <div class="header">
        <h1>🎤 音声認識アプリ</h1>
        <div class="subtitle">製品マニュアル - カスタマーサポート業務効率化ツール</div>
    </div>

    <!-- ナビゲーション -->
    <nav class="nav">
        <div class="nav-container">
            <ul class="nav-list">
                <li><a href="#overview">はじめに</a></li>
                <li><a href="#requirements">システム要件</a></li>
                <li><a href="#setup">初期設定</a></li>
                <li><a href="#basic-usage">基本操作</a></li>
                <li><a href="#advanced">詳細機能</a></li>
                <li><a href="#troubleshooting">トラブル</a></li>
                <li><a href="#faq">FAQ</a></li>
                <li><a href="#appendix">付録</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- はじめに -->
        <section id="overview" class="section">
            <h2>🌟 はじめに</h2>
            
            <h3>製品概要</h3>
            <p>音声認識アプリは、カスタマーサポート業務を効率化するためのWebアプリケーションです。通話内容をリアルタイムでテキスト化し、AI（Gemini）による自動要約機能を提供します。</p>

            <h3>主な特徴</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 1rem 0;">
                <div class="alert alert-info">
                    <strong>✅ リアルタイム音声認識</strong><br>
                    日本語に対応した高精度な音声認識
                </div>
                <div class="alert alert-info">
                    <strong>✅ AI自動要約機能</strong><br>
                    カスタマーサポート特化の要約生成
                </div>
                <div class="alert alert-info">
                    <strong>✅ 通話統計管理</strong><br>
                    通話時間・回数の自動記録
                </div>
                <div class="alert alert-info">
                    <strong>✅ データ保存機能</strong><br>
                    ローカル保存・ダウンロード対応
                </div>
            </div>

            <div class="alert alert-danger">
                <strong>🔴 重要な注意事項</strong><br>
                <strong>ヒアリング情報は必ず復唱してください！</strong><br>
                この製品は復唱確認による通話品質向上を支援します。
            </div>
        </section>

        <!-- システム要件 -->
        <section id="requirements" class="section">
            <h2>💻 システム要件</h2>

            <h3>対応ブラウザ</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>ブラウザ</th>
                        <th>バージョン</th>
                        <th>推奨度</th>
                        <th>備考</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Google Chrome</td>
                        <td>最新版</td>
                        <td><span class="badge badge-success">⭐⭐⭐</span></td>
                        <td>最も安定</td>
                    </tr>
                    <tr>
                        <td>Microsoft Edge</td>
                        <td>最新版</td>
                        <td><span class="badge badge-success">⭐⭐⭐</span></td>
                        <td>Chromiumベース</td>
                    </tr>
                    <tr>
                        <td>Mozilla Firefox</td>
                        <td>最新版</td>
                        <td><span class="badge badge-warning">⭐⭐</span></td>
                        <td>基本対応</td>
                    </tr>
                    <tr>
                        <td>Safari</td>
                        <td>最新版</td>
                        <td><span class="badge badge-warning">⭐⭐</span></td>
                        <td>macOS/iOS</td>
                    </tr>
                </tbody>
            </table>

            <h3>必要な環境</h3>
            <ul>
                <li><strong>HTTPS接続</strong>（音声認識API要件）</li>
                <li><strong>マイク付きデバイス</strong></li>
                <li><strong>インターネット接続</strong>（AI要約機能使用時）</li>
                <li><strong>JavaScript有効化</strong></li>
            </ul>

            <h3>推奨スペック</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                <div class="alert alert-info">
                    <strong>CPU</strong><br>2GHz以上
                </div>
                <div class="alert alert-info">
                    <strong>メモリ</strong><br>4GB以上
                </div>
                <div class="alert alert-info">
                    <strong>ネットワーク</strong><br>安定した接続
                </div>
            </div>
        </section>

        <!-- 初期設定 -->
        <section id="setup" class="section">
            <h2>🔐 初期設定</h2>

            <div class="steps">
                <div class="step">
                    <h4>アプリケーションへのアクセス</h4>
                    <ol>
                        <li>ブラウザでアプリURLにアクセス</li>
                        <li>認証画面が表示されます</li>
                    </ol>

                    <div class="ui-mockup">
                        <div class="ui-title">🔐 音声認識アプリ</div>
                        <div>アクセスするには認証が必要です</div>
                        <br>
                        <div>ユーザー名: <span class="ui-input">[入力欄]</span></div>
                        <div>パスワード: <span class="ui-input">[入力欄]</span></div>
                        <div><span class="ui-button">🔓 ログイン</span></div>
                    </div>

                    <p><strong>認証情報を入力:</strong></p>
                    <ul>
                        <li>ユーザー名: <span class="code-inline">cbts-sol</span></li>
                        <li>パスワード: <span class="code-inline">cbts1192</span></li>
                    </ul>

                    <div class="alert alert-info">
                        💡 <strong>ヒント:</strong> 認証は24時間有効です。期限後は再ログインが必要です。
                    </div>
                </div>

                <div class="step">
                    <h4>初期画面の確認</h4>
                    <p>ログイン成功後、以下の画面が表示されます：</p>

                    <div class="ui-mockup">
                        <div class="ui-title">🎤 音声認識アプリ</div>
                        <div style="color: #ff6b6b; text-align: center;">CSの対応を要約☎：<strong>ヒアリング情報は必ず復唱！！</strong></div>
                        <br>
                        <div style="background: #2d3748; padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0;">
                            <span style="color: #4fd1c7;">💻 システムログ</span>
                            <span style="float: right;">▼</span>
                        </div>
                        <div style="background: #f8f9fa; color: #007bff; padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0; border-left: 4px solid #007bff;">
                            <span>📊 システム状態</span>
                            <span style="float: right;">▼</span>
                        </div>
                        <div style="background: #fff3cd; color: #856404; padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0; border-left: 4px solid #ffc107;">
                            <span>🔑 Gemini API設定</span>
                            <span style="float: right;">▼</span>
                        </div>
                        <div style="background: #e8f5e8; color: #1e7e34; padding: 0.5rem; border-radius: 4px; margin: 0.5rem 0; border-left: 4px solid #28a745;">
                            <span>📝 プロンプト設定</span>
                            <span style="float: right;">▼</span>
                        </div>
                        <br>
                        <div style="background: #fff3cd; padding: 1rem; border-radius: 4px; border-left: 4px solid #ffc107;">
                            <div style="color: #333; font-weight: bold; margin-bottom: 0.5rem;">📊 通話統計</div>
                            <div style="display: flex; justify-content: space-between; margin: 0.3rem 0; color: #333;">
                                <span>通話数（録音開始回数）:</span>
                                <span style="background: #e9ecef; padding: 0.2rem 0.5rem; border-radius: 12px; color: #333;">0回</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 0.3rem 0; color: #333;">
                                <span>現在の通話時間:</span>
                                <span style="background: #e9ecef; padding: 0.2rem 0.5rem; border-radius: 12px; color: #333;">00:00</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 0.3rem 0; color: #333;">
                                <span>累計通話時間:</span>
                                <span style="background: #e9ecef; padding: 0.2rem 0.5rem; border-radius: 12px; color: #333;">00:00</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin: 0.3rem 0; color: #333;">
                                <span>平均通話時間:</span>
                                <span style="background: #e9ecef; padding: 0.2rem 0.5rem; border-radius: 12px; color: #333;">00:00</span>
                            </div>
                        </div>
                        <br>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin: 0.5rem 0;">
                            <span class="ui-button" style="text-align: center;">🎙️ 録音開始</span>
                            <span class="ui-button" style="text-align: center; background: #dc3545;">⏹️ 録音停止</span>
                            <span class="ui-button" style="text-align: center; background: #28a745;">💾 ダウンロード</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin: 0.5rem 0;">
                            <span class="ui-button" style="text-align: center; background: #ffc107; color: #333;">🔑 API設定</span>
                            <span class="ui-button" style="text-align: center;">🔧 接続テスト</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin: 0.5rem 0;">
                            <span class="ui-button" style="text-align: center; background: #28a745;">🤖 要約実行</span>
                            <span class="ui-button" style="text-align: center; background: #6c757d;">🔚 終了</span>
                        </div>
                        <br>
                        <div><span class="ui-button" style="background: #17a2b8;">✏️ 編集モード</span></div>
                        <div style="background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 8px; padding: 1rem; margin: 0.5rem 0; text-align: center; color: #6c757d; font-style: italic;">
                            音声認識結果がここに表示されます...
                        </div>
                    </div>
                </div>

                <div class="step">
                    <h4>Gemini API設定（要約機能使用時）</h4>
                    <p>要約機能を使用する場合は、Googleの生成AI「Gemini」へのAPIキーが必要です。</p>

                    <div class="alert alert-warning">
                        <strong>⚠️ 注意事項</strong><br>
                        • APIキー設定は要約機能使用時のみ必要<br>
                        • 音声認識機能のみ使用する場合は設定不要<br>
                        • APIキーは無料枠がありますが、使用量によって課金される場合があります
                    </div>

                    <h5 style="color: #667eea; margin: 1.5rem 0 1rem 0;">🔑 APIキーの取得手順</h5>
                    <ol>
                        <li><strong>Google AI Studioにアクセス</strong>
                            <ul>
                                <li><a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #007bff;">Google AI Studio</a> にアクセス</li>
                                <li>Googleアカウントでログインが必要です</li>
                            </ul>
                        </li>
                        <li><strong>APIキーを作成</strong>
                            <ul>
                                <li>「Create API key」ボタンをクリック</li>
                                <li>プロジェクトを選択（新規作成も可能）</li>
                                <li>APIキーが自動生成されます</li>
                            </ul>
                        </li>
                        <li><strong>APIキーをコピー</strong>
                            <ul>
                                <li><span class="code-inline">AIzaSy...</span> で始まる長い文字列をコピー</li>
                                <li>⚠️ APIキーは秘密情報として厳重に管理してください</li>
                            </ul>
                        </li>
                    </ol>

                    <h5 style="color: #667eea; margin: 1.5rem 0 1rem 0;">⚙️ アプリへの設定手順</h5>
                    <ol>
                        <li><strong>API設定画面を開く</strong>
                            <ul>
                                <li>アプリ画面の「🔑 API設定」ボタンをクリック</li>
                                <li>入力ダイアログが表示されます</li>
                            </ul>
                        </li>
                        <li><strong>APIキーを入力</strong>
                            <ul>
                                <li>コピーしたAPIキーをダイアログに貼り付け</li>
                                <li>形式チェック：<span class="code-inline">AIzaSy</span>で始まっているか確認</li>
                                <li>「OK」ボタンをクリック</li>
                            </ul>
                        </li>
                        <li><strong>設定完了確認</strong>
                            <ul>
                                <li>「✅ APIキーが設定されました」のメッセージが表示</li>
                                <li>システム状態の「Gemini API」が「✅ 設定済」に変更</li>
                                <li>「🔧 接続テスト」ボタンが有効になります</li>
                            </ul>
                        </li>
                    </ol>

                    <h5 style="color: #667eea; margin: 1.5rem 0 1rem 0;">🔧 接続テストの実行</h5>
                    <ol>
                        <li><strong>テスト実行</strong>
                            <ul>
                                <li>「🔧 接続テスト」ボタンをクリック</li>
                                <li>Gemini APIとの通信テストが実行されます</li>
                            </ul>
                        </li>
                        <li><strong>結果確認</strong>
                            <ul>
                                <li><strong>成功時：</strong>「✅ API接続成功！」が表示</li>
                                <li><strong>失敗時：</strong>「❌ API接続失敗: [エラーコード]」が表示</li>
                            </ul>
                        </li>
                    </ol>

                    <div class="alert alert-success">
                        <strong>✅ 設定完了後の状態</strong><br>
                        • 「🤖 要約実行」ボタンが使用可能<br>
                        • APIキーはブラウザに安全に保存<br>
                        • 次回アクセス時も設定が維持されます
                    </div>

                    <h5 style="color: #dc3545; margin: 1.5rem 0 1rem 0;">❌ トラブルシューティング</h5>
                    <div style="margin-left: 1rem;">
                        <p><strong>「❌ 無効なAPIキー形式です」が表示される場合：</strong></p>
                        <ul>
                            <li>APIキーが<span class="code-inline">AIzaSy</span>で始まっているか確認</li>
                            <li>コピー時に余分なスペースが入っていないか確認</li>
                            <li>APIキー全体が正しくコピーされているか確認</li>
                        </ul>

                        <p><strong>「❌ API接続失敗」が表示される場合：</strong></p>
                        <ul>
                            <li>インターネット接続を確認</li>
                            <li>APIキーが有効か確認（Google AI Studioで再確認）</li>
                            <li>一時的な問題の可能性があるため、しばらく待ってから再試行</li>
                        </ul>

                        <p><strong>API使用量・課金について：</strong></p>
                        <ul>
                            <li>Google AI Studioで使用量を確認可能</li>
                            <li>無料枠を超えた場合、課金が発生する可能性があります</li>
                            <li>詳細は<a href="https://ai.google.dev/pricing" target="_blank" style="color: #007bff;">Google AI料金体系</a>をご確認ください</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 基本操作 -->
        <section id="basic-usage" class="section">
            <h2>🎤 基本操作</h2>

            <h3>通話記録の基本フロー</h3>

            <div class="steps">
                <div class="step">
                    <h4>録音開始</h4>
                    <ol>
                        <li>「🎙️ 録音開始」をクリック</li>
                        <li>マイクアクセス許可（初回のみ）</li>
                        <li>タイムスタンプが自動追加</li>
                        <li>リアルタイムで音声がテキスト化</li>
                    </ol>

                    <div class="code-block">
表示例:
[10:30:15]
こちらは〇〇会社です。お世話になっております。
[認識中] どのようなご用件でしょうか
                    </div>
                </div>

                <div class="step">
                    <h4>通話実施</h4>
                    <ul>
                        <li><strong>音声が自動的にテキスト化</strong>されます</li>
                        <li><strong>復唱時</strong>は明確に話してください</li>
                        <li><strong>タイマー</strong>が通話時間を記録します</li>
                    </ul>
                </div>

                <div class="step">
                    <h4>録音停止</h4>
                    <ol>
                        <li>「⏹️ 録音停止」をクリック</li>
                        <li>音声認識が停止</li>
                        <li>通話時間が統計に反映</li>
                    </ol>
                </div>

                <div class="step">
                    <h4>要約実行</h4>
                    <ol>
                        <li>「🤖 要約実行」をクリック</li>
                        <li>最新のタイムスタンプ以降を自動要約</li>
                        <li>ポップアップで結果表示</li>
                    </ol>
                </div>

                <div class="step">
                    <h4>データ保存</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div class="alert alert-info">
                            <strong>💾 ダウンロード</strong><br>
                            テキストファイルとして保存
                        </div>
                        <div class="alert alert-success">
                            <strong>🔚 終了</strong><br>
                            統計情報付きで一括保存後クリア
                        </div>
                    </div>
                </div>
            </div>

            <h3>キーボードショートカット</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>キー</th>
                        <th>機能</th>
                        <th>説明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-primary">スペース</span></td>
                        <td>録音開始/停止</td>
                        <td>通話の開始・終了を切り替え</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-primary">Ctrl + G</span></td>
                        <td>要約実行</td>
                        <td>AI要約を実行</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-primary">ESC</span></td>
                        <td>ポップアップを閉じる</td>
                        <td>要約結果ポップアップを閉じる</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 詳細機能 -->
        <section id="advanced" class="section">
            <h2>🔧 詳細機能</h2>

            <h3>📊 システム状態の確認</h3>
            <p>「📊 システム状態」セクションで動作環境を確認できます：</p>

            <table class="table">
                <thead>
                    <tr>
                        <th>項目</th>
                        <th>正常</th>
                        <th>異常</th>
                        <th>対処法</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>HTTPS環境</td>
                        <td><span class="badge badge-success">✅ OK</span></td>
                        <td><span class="badge badge-danger">❌ NG</span></td>
                        <td>HTTPS接続を確認</td>
                    </tr>
                    <tr>
                        <td>音声認識API</td>
                        <td><span class="badge badge-success">✅ OK</span></td>
                        <td><span class="badge badge-danger">❌ NG</span></td>
                        <td>ブラウザ更新・変更</td>
                    </tr>
                    <tr>
                        <td>マイクアクセス</td>
                        <td><span class="badge badge-success">✅ 許可</span></td>
                        <td><span class="badge badge-danger">❌ 拒否</span></td>
                        <td>ブラウザ設定確認</td>
                    </tr>
                    <tr>
                        <td>Gemini API</td>
                        <td><span class="badge badge-success">✅ 設定済</span></td>
                        <td><span class="badge badge-warning">未設定</span></td>
                        <td>APIキー設定</td>
                    </tr>
                </tbody>
            </table>

            <h3>✏️ テキスト編集機能</h3>
            
            <h4>編集モードの使用</h4>
            <div class="steps">
                <div class="step">
                    <h4>編集開始</h4>
                    <p>「✏️ 編集モード」をクリック</p>
                </div>
                <div class="step">
                    <h4>編集実行</h4>
                    <p>テキストエリアで直接編集</p>
                </div>
                <div class="step">
                    <h4>編集終了</h4>
                    <p>「👁️ 表示モード」で元に戻る（自動保存）</p>
                </div>
            </div>

            <div class="alert alert-info">
                <strong>編集時の注意</strong><br>
                • 録音中も編集可能<br>
                • 編集内容は自動保存<br>
                • 要約対象にも反映
            </div>

            <h3>📝 プロンプト設定</h3>

            <h4>プロンプトの種類</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <div class="alert alert-info">
                    <strong>デフォルト（要約）</strong><br>
                    一般的な要約形式
                </div>
                <div class="alert alert-success">
                    <strong>カスタマーサポート用</strong><br>
                    構造化された業務用要約
                </div>
                <div class="alert alert-warning">
                    <strong>カスタム</strong><br>
                    独自にカスタマイズ可能
                </div>
            </div>

            <h4>カスタマーサポート用要約例</h4>
            <div class="code-block">
## **対応概要**
資格試験に関する問い合わせ対応

## **受験試験（予定を含む）** 
情報処理技術者試験（春期）

## **受験方法** 
個人

## **対応者** 
受験者

## **質問内容**
試験会場と受験票の件について確認

## **回答内容**  
試験会場は〇〇で、受験票は〇月〇日頃発送予定とご案内

## **結論**
試験会場と受験票発送時期についてご案内済

## **理由**
受験者からの事前確認のため

## **プロセス**
電話での口頭案内
            </div>

            <h3>🤖 要約ポップアップ機能</h3>

            <h4>セクション別コピー</h4>
            <ul>
                <li><strong>各セクションタイトルをクリック</strong>でテキストのみコピー</li>
                <li><strong>視覚的フィードバック</strong>で確認</li>
                <li><strong>「📋 コピー」</strong>で全文コピー</li>
            </ul>

            <h4>印刷機能</h4>
            <ul>
                <li><strong>「🖨️ 印刷」</strong>で要約結果を印刷</li>
                <li><strong>自動フォーマット</strong>で見やすく出力</li>
            </ul>

            <h3>📊 通話統計機能</h3>

            <h4>記録される情報</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th>項目</th>
                        <th>説明</th>
                        <th>更新タイミング</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>通話数</td>
                        <td>録音開始回数</td>
                        <td>録音開始時</td>
                    </tr>
                    <tr>
                        <td>現在の通話時間</td>
                        <td>リアルタイム表示</td>
                        <td>録音中（1秒毎）</td>
                    </tr>
                    <tr>
                        <td>累計通話時間</td>
                        <td>全セッション合計</td>
                        <td>録音停止時</td>
                    </tr>
                    <tr>
                        <td>平均通話時間</td>
                        <td>自動計算</td>
                        <td>録音停止時</td>
                    </tr>
                </tbody>
            </table>

            <div class="alert alert-warning">
                <strong>統計のリセット</strong><br>
                「🔚 終了」で全統計クリア（確認ダイアログで誤操作防止）
            </div>
        </section>

        <!-- トラブルシューティング -->
        <section id="troubleshooting" class="section">
            <h2>🆘 トラブルシューティング</h2>

            <h3>音声認識が動作しない</h3>

            <div class="alert alert-danger">
                <strong>症状:</strong> 「❌ 音声認識API: NG」表示
            </div>

            <h4>対処法:</h4>
            <div class="steps">
                <div class="step">
                    <h4>HTTPS接続を確認</h4>
                    <ul>
                        <li>URLが <span class="code-inline">https://</span> で始まっているか確認</li>
                        <li>HTTP接続では音声認識は動作しません</li>
                    </ul>
                </div>
                <div class="step">
                    <h4>ブラウザを更新</h4>
                    <ul>
                        <li>F5キーまたは更新ボタンをクリック</li>
                    </ul>
                </div>
                <div class="step">
                    <h4>対応ブラウザを使用</h4>
                    <ul>
                        <li>Chrome, Edge, Firefox, Safari最新版</li>
                    </ul>
                </div>
            </div>

            <div class="alert alert-danger">
                <strong>症状:</strong> 「❌ マイクアクセス: 拒否」表示
            </div>

            <h4>対処法:</h4>
            <div class="steps">
                <div class="step">
                    <h4>ブラウザ設定でマイクを許可</h4>
                    <ul>
                        <li><strong>Chrome:</strong> 設定 > プライバシーとセキュリティ > サイトの設定 > マイク</li>
                        <li>アプリのURLを許可リストに追加</li>
                    </ul>
                </div>
                <div class="step">
                    <h4>デバイスマイクを確認</h4>
                    <ul>
                        <li>他のアプリでマイクが正常動作するか確認</li>
                        <li>マイクが接続されているか確認</li>
                    </ul>
                </div>
            </div>

            <h3>要約機能が使用できない</h3>

            <div class="alert alert-warning">
                <strong>症状:</strong> 「🤖 要約実行」ボタンが無効
            </div>

            <h4>対処法:</h4>
            <div class="steps">
                <div class="step">
                    <h4>APIキーを設定</h4>
                    <p>「🔑 API設定」からAPIキーを入力</p>
                </div>
                <div class="step">
                    <h4>接続テストを実行</h4>
                    <p>「🔧 接続テスト」で接続確認</p>
                </div>
                <div class="step">
                    <h4>テキストが存在するか確認</h4>
                    <p>音声認識結果が入力されているか確認</p>
                </div>
            </div>

            <div class="alert alert-danger">
                <strong>症状:</strong> 「❌ 最新のタイムスタンプ以下に要約対象となるテキストがありません」
            </div>

            <h4>対処法:</h4>
            <ol>
                <li>録音を実行してテキストを生成</li>
                <li>編集モードで手動テキスト入力</li>
                <li>タイムスタンプ以降にテキストがあるか確認</li>
            </ol>

            <h3>認証エラー</h3>

            <div class="alert alert-danger">
                <strong>症状:</strong> 「❌ ユーザー名またはパスワードが間違っています」
            </div>

            <h4>対処法:</h4>
            <div class="steps">
                <div class="step">
                    <h4>認証情報を再確認</h4>
                    <ul>
                        <li>ユーザー名: <span class="code-inline">cbts-sol</span></li>
                        <li>パスワード: <span class="code-inline">cbts1192</span></li>
                    </ul>
                </div>
                <div class="step">
                    <h4>入力チェック</h4>
                    <ul>
                        <li>大文字小文字を確認</li>
                        <li>不要なスペースがないか確認</li>
                    </ul>
                </div>
            </div>

            <h3>ページが表示されない</h3>

            <div class="alert alert-danger">
                <strong>症状:</strong> アクセスできない・白いページ
            </div>

            <h4>対処法:</h4>
            <ol>
                <li>URLを再確認</li>
                <li>ネットワーク接続を確認</li>
                <li>ブラウザのキャッシュをクリア</li>
                <li>別のブラウザで試行</li>
            </ol>
        </section>

        <!-- FAQ -->
        <section id="faq" class="section">
            <h2>❓ FAQ</h2>

            <div class="faq-item">
                <div class="faq-question">
                    Q1: 通話中に他の作業をしても大丈夫？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> はい。音声認識は背景で継続動作します。ただし、ブラウザタブを閉じると停止するのでご注意ください。
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q2: 音声認識の精度を上げるには？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 
                    <ul>
                        <li><strong>明確に話す</strong></li>
                        <li><strong>雑音の少ない環境</strong></li>
                        <li><strong>マイクに近づく</strong></li>
                        <li><strong>復唱時は特にゆっくり</strong></li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q3: データはどこに保存される？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 
                    <ul>
                        <li><strong>音声データ:</strong> 保存されません（リアルタイム処理のみ）</li>
                        <li><strong>テキストデータ:</strong> ブラウザのローカルストレージ</li>
                        <li><strong>要約結果:</strong> 一時的（ポップアップ表示中のみ）</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q4: 複数人での使用は可能？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 同じ認証情報で複数デバイスからアクセス可能です。ただし、統計情報は各デバイス別々に管理されます。
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q5: オフラインでも使用できる？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 
                    <ul>
                        <li><strong>音声認識:</strong> オフライン不可（Web Speech API使用）</li>
                        <li><strong>要約機能:</strong> オフライン不可（Gemini API使用）</li>
                        <li><strong>テキスト編集:</strong> オフライン可能</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q6: 要約プロンプトをカスタマイズしたい
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 
                    <ol>
                        <li>「📝 プロンプト設定」を展開</li>
                        <li>「カスタム」を選択</li>
                        <li>「✏️ プロンプト編集」でカスタマイズ</li>
                    </ol>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    Q7: 長時間の通話でも問題ない？
                    <span>▼</span>
                </div>
                <div class="faq-answer">
                    <strong>A:</strong> 技術的制限はありませんが、ブラウザの安定性を考慮し、1時間程度で区切ることを推奨します。
                </div>
            </div>
        </section>

        <!-- 付録 -->
        <section id="appendix" class="section">
            <h2>📖 付録</h2>

            <h3>A. プロンプトテンプレート集</h3>

            <h4>基本要約用</h4>
            <div class="code-block">
以下のテキストを日本語で構造化して要約してください:

## 📋 要約
[主要な内容を3-5行で]

## 🔍 重要ポイント
• [重要なポイント1]
• [重要なポイント2]
• [重要なポイント3]

テキスト: 
            </div>

            <h4>問い合わせ対応用</h4>
            <div class="code-block">
顧客からの問い合わせ内容を以下の形式で整理してください:

## 顧客情報
## 問い合わせ内容
## 対応内容
## 解決状況
## フォローアップ

テキスト:
            </div>

            <h3>B. ショートカットキー一覧</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>機能</th>
                        <th>キー</th>
                        <th>説明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>録音開始/停止</td>
                        <td><span class="badge badge-primary">スペース</span></td>
                        <td>通話開始・終了の切り替え</td>
                    </tr>
                    <tr>
                        <td>要約実行</td>
                        <td><span class="badge badge-primary">Ctrl + G</span></td>
                        <td>AI要約の実行</td>
                    </tr>
                    <tr>
                        <td>ポップアップ閉じる</td>
                        <td><span class="badge badge-primary">ESC</span></td>
                        <td>要約結果ポップアップを閉じる</td>
                    </tr>
                    <tr>
                        <td>編集モード切替</td>
                        <td>-</td>
                        <td>ボタンクリックのみ</td>
                    </tr>
                </tbody>
            </table>

            <h3>C. ファイル形式・命名規則</h3>

            <h4>ダウンロードファイル</h4>
            <ul>
                <li><strong>形式:</strong> <span class="code-inline">.txt</span>（UTF-8エンコード）</li>
                <li><strong>命名:</strong> <span class="code-inline">音声認識_YYYY-MM-DD-HH-mm-ss.txt</span></li>
                <li><strong>内容:</strong> 音声認識結果のみ</li>
            </ul>

            <h4>終了時保存ファイル</h4>
            <ul>
                <li><strong>形式:</strong> <span class="code-inline">.txt</span>（UTF-8エンコード）</li>
                <li><strong>命名:</strong> <span class="code-inline">音声認識_YYYY-MM-DD-HH-mm-ss.txt</span></li>
                <li><strong>内容:</strong> 統計情報 + 音声認識結果</li>
            </ul>

            <h3>D. API制限事項</h3>

            <h4>Gemini API</h4>
            <div class="alert alert-warning">
                <ul>
                    <li><strong>レート制限:</strong> あり（詳細はGoogle AI Studio参照）</li>
                    <li><strong>テキスト長制限:</strong> あり</li>
                    <li><strong>料金:</strong> 使用量に応じて課金される場合があります</li>
                </ul>
            </div>

            <h4>Web Speech API</h4>
            <div class="alert alert-info">
                <ul>
                    <li><strong>連続使用制限:</strong> ブラウザ依存</li>
                    <li><strong>言語:</strong> 日本語（ja-JP）固定</li>
                    <li><strong>精度:</strong> 環境・発話により変動</li>
                </ul>
            </div>

            <h3>E. 更新履歴</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>バージョン</th>
                        <th>日付</th>
                        <th>主な変更内容</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>v1.0</td>
                        <td>2024-XX-XX</td>
                        <td>初回リリース</td>
                    </tr>
                    <tr>
                        <td>-</td>
                        <td>-</td>
                        <td>基本的な音声認識・要約機能</td>
                    </tr>
                    <tr>
                        <td>-</td>
                        <td>-</td>
                        <td>認証機能・統計機能</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- サポート情報 -->
        <section class="section">
            <h2>📞 サポート情報</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div class="alert alert-info">
                    <h3>技術サポート</h3>
                    <ul>
                        <li>初期設定支援</li>
                        <li>操作方法説明</li>
                        <li>トラブル解決</li>
                    </ul>
                </div>

                <div class="alert alert-success">
                    <h3>機能改善要望</h3>
                    <ul>
                        <li>新機能提案</li>
                        <li>プロンプト改善</li>
                        <li>UI/UX改善</li>
                    </ul>
                </div>
            </div>

            <div class="alert alert-warning">
                <strong>📝 このマニュアルは随時更新されます。最新版をご確認ください。</strong>
            </div>

            <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: #f8f9fa; border-radius: 8px;">
                <p style="font-size: 1.1rem; color: #667eea; font-weight: bold;">
                    音声認識アプリをご利用いただき、ありがとうございます。<br>
                    効率的なカスタマーサポート業務にお役立てください。
                </p>
            </div>
        </section>
    </div>

    <script>
        // FAQ の開閉機能
        document.addEventListener('DOMContentLoaded', function() {
            const faqQuestions = document.querySelectorAll('.faq-question');
            
            faqQuestions.forEach(question => {
                question.addEventListener('click', function() {
                    const faqItem = this.parentElement;
                    const answer = faqItem.querySelector('.faq-answer');
                    const arrow = this.querySelector('span:last-child');
                    
                    if (answer.style.display === 'none' || answer.style.display === '') {
                        answer.style.display = 'block';
                        arrow.textContent = '▲';
                        faqItem.style.background = '#f8f9fa';
                    } else {
                        answer.style.display = 'none';
                        arrow.textContent = '▼';
                        faqItem.style.background = 'white';
                    }
                });
            });

            // 初期状態で全てのFAQを閉じる
            const faqAnswers = document.querySelectorAll('.faq-answer');
            faqAnswers.forEach(answer => {
                answer.style.display = 'none';
            });

            // スムーズスクロール
            const navLinks = document.querySelectorAll('.nav-list a');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        const navHeight = document.querySelector('.nav').offsetHeight;
                        const targetPosition = targetElement.offsetTop - navHeight - 20;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // 現在のセクションをハイライト
            const sections = document.querySelectorAll('.section[id]');
            const navLinksArray = Array.from(navLinks);

            function updateActiveNav() {
                const scrollPosition = window.scrollY + 150;

                sections.forEach((section, index) => {
                    const sectionTop = section.offsetTop;
                    const sectionBottom = sectionTop + section.offsetHeight;

                    if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                        navLinksArray.forEach(link => link.style.background = '');
                        navLinksArray.forEach(link => link.style.color = '#666');
                        
                        const activeLink = navLinksArray.find(link => 
                            link.getAttribute('href') === `#${section.id}`
                        );
                        
                        if (activeLink) {
                            activeLink.style.background = '#667eea';
                            activeLink.style.color = 'white';
                        }
                    }
                });
            }

            window.addEventListener('scroll', updateActiveNav);
            updateActiveNav(); // 初期実行
        });
    </script>
</body>
</html>
